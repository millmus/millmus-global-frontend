# 이메일 로그인 제거 설계서

**작성일**: 2025년 11월 3일
**프로젝트**: MillmusGlobal Frontend
**목적**: 이메일 기반 일반 로그인 시스템 완전 제거
**작성자**: Claude (Technical Writer)

---

## 목차

1. [프로젝트 개요 및 목표](#1-프로젝트-개요-및-목표)
2. [현재 상태 분석](#2-현재-상태-분석)
3. [의존성 분석](#3-의존성-분석)
4. [제거 전략](#4-제거-전략)
5. [위험 관리](#5-위험-관리)
6. [테스트 전략](#6-테스트-전략)
7. [실행 로드맵](#7-실행-로드맵)
8. [부록](#8-부록)

---

## 1. 프로젝트 개요 및 목표

### 1.1 프로젝트 컨텍스트

**프로젝트명**: MillmusGlobal Frontend
**기술 스택**:
- **프레임워크**: Next.js 12.3.4
- **라이브러리**: React 17, TypeScript
- **상태 관리**: SWR (useSWR)
- **폼 관리**: React Hook Form
- **HTTP 클라이언트**: Axios
- **인증 방식**: Cookie 기반 토큰 인증

**현재 로그인 시스템**:
- 일반 로그인 (아이디/비밀번호 - **제거 대상**)
- SNS 로그인 (Google, Naver - **유지**)

### 1.2 작업 목표

**주요 목표**: 이메일/아이디 기반 일반 로그인 시스템을 완전히 제거하고, SNS 로그인 방식만 유지

**구체적 목표**:
1. ✅ 일반 로그인 관련 UI 컴포넌트 제거
2. ✅ 일반 로그인 API 엔드포인트 제거
3. ✅ 회원가입, 아이디 찾기, 비밀번호 재설정 기능 제거
4. ✅ 관련 라우트 및 페이지 제거
5. ✅ SNS 로그인 기능은 완전히 유지
6. ✅ 사용자 인증 흐름의 무결성 보장

### 1.3 배경 및 동기

**제거 이유**:
- SNS 로그인으로의 통합 (Google, Naver)
- 보안 관리 복잡도 감소 (비밀번호 관리, 재설정 등)
- 사용자 경험 개선 (간편 로그인)
- 유지보수 비용 절감

**영향 범위**:
- 프론트엔드: 로그인/회원가입 UI, API 호출 로직
- 백엔드 API: `/users/login/`, `/users/signup/` 등 (별도 백엔드 작업 필요)

---

## 2. 현재 상태 분석

### 2.1 이메일 로그인 시스템 개요

**인증 방식**: Cookie 기반 JWT 토큰
**로그인 방법**:
1. 일반 로그인 (아이디/비밀번호) - **제거 대상**
2. SNS 로그인 (Google, Naver) - **유지**

**일반 로그인 특징**:
- 아이디(username)와 비밀번호로 인증
- 로그인 성공 시 서버에서 `access_token` 발급
- 토큰을 HttpOnly Cookie에 저장
- 클라이언트는 `/api/user`를 통해 인증 상태 확인

### 2.2 주요 컴포넌트 및 파일

#### 2.2.1 페이지 컴포넌트

**로그인 페이지**:
- **파일**: `/pages/login.tsx`
- **기능**:
  - 일반 로그인 폼 (아이디/비밀번호 입력)
  - SNS 로그인 버튼 (Google, Naver)
  - 회원가입, 아이디 찾기, 비밀번호 찾기 링크
- **제거 대상**:
  - 일반 로그인 폼 (lines 79-181)
  - 회원가입 버튼 및 링크 (lines 186-191)
  - 아이디/비밀번호 찾기 링크 (lines 194-204)
- **유지 대상**:
  - SNS 로그인 버튼 (lines 206-211)
  - 페이지 구조 (SEO, 레이아웃)

**회원가입 페이지**:
- **파일**: `/pages/signup.tsx`
- **기능**: 일반 회원가입 폼
- **상태**: **완전 제거**

**아이디 찾기 페이지**:
- **파일**: `/pages/find-id.tsx`
- **기능**: 휴대폰 번호로 아이디 찾기
- **상태**: **완전 제거**

**비밀번호 재설정 페이지**:
- **파일**: `/pages/reset-pw.tsx`
- **기능**: 휴대폰 인증 후 비밀번호 재설정
- **상태**: **완전 제거**

#### 2.2.2 API 라우트

**로그인 API**:
- **파일**: `/pages/api/login.ts`
- **기능**:
  - 일반 로그인 처리 (`type: 'normal'`)
  - SNS 로그인 처리 (`type: 'google'`, `type: 'naver'`)
- **수정 방법**:
  - `type === 'normal'` 조건문 제거 (lines 11-21)
  - SNS 로그인 로직만 유지

**회원가입 API**:
- **파일**: `/pages/api/signup.ts`
- **기능**: 일반 회원가입 처리
- **상태**: **완전 제거**

#### 2.2.3 UI 컴포넌트

**로그인 컴포넌트**:
- **디렉토리**: `/components/login/`
- **파일**:
  - `eventSlider.tsx` - 로그인 페이지 이벤트 슬라이더 (유지)
  - `googleBtn.tsx` - Google 로그인 버튼 (**유지**)
  - `naverBtn.tsx` - Naver 로그인 버튼 (**주석 처리됨, 필요시 활성화**)

**아이디/비밀번호 찾기 팝업**:
- **디렉토리**: `/components/find/`
- **파일**:
  - `idPopup.tsx` - 아이디 찾기 팝업 (**제거**)
  - `pwPopup.tsx` - 비밀번호 찾기 팝업 (**제거**)

#### 2.2.4 API 클라이언트

**파일**: `/libs/api.ts`

**제거 대상 API 메서드** (usersApi 객체):
```typescript
// 아이디 중복 확인
checkId: (username: string) => ... // Line 18-19

// 회원가입 인증번호 발급
getSignupCode: (phoneNum: string) => ... // Lines 22-25

// 인증번호 발급
getCode: (phone_number: string, username?: string) => ... // Lines 28-32

// 인증번호 확인
checkCode: (phone_number: string, code: string) => ... // Lines 35-41

// 회원가입 (NextJS API)
signupNextApi: (req: IProps) => ... // Line 44

// 회원가입 (백엔드 직접 호출)
signup: ({...}: IProps) => ... // Lines 47-64

// SNS 회원가입
snsSignup: ({...}: IProps) => ... // Lines 66-74

// 로그인 (NextJS API)
loginNextApi: (req: IProps) => ... // Line 77

// 로그인 (백엔드 직접 호출)
login: ({username, password}: IProps) => ... // Lines 79-84

// 아이디 찾기
findId: (phoneNum: string) => ... // Lines 99-100

// 비밀번호 재설정
resetPw: (username: string, password: string) => ... // Lines 103-104
```

**유지 대상**:
```typescript
// SNS 로그인
snsLogin: ({type, id, ...}: IProps) => ... // Lines 86-94

// 로그아웃
logoutNextApi: () => ... // Line 96

// 마이페이지 관련 API (모두 유지)
myInfos, editInfos, withdraw, myNotificationList, etc.
```

#### 2.2.5 인증 훅 및 유틸리티

**useUser Hook**:
- **파일**: `/libs/client/useUser.ts`
- **기능**: 사용자 인증 상태 관리 및 리다이렉션
- **수정 필요**: 없음 (토큰 기반 인증은 SNS 로그인에서도 동일하게 사용)
- **상태**: **유지**

**withAuth HOC**:
- **파일**: `/libs/server/withAuth.ts`
- **기능**: 서버 사이드 인증 체크
- **수정 필요**: 없음 (토큰 기반 인증 체크는 로그인 방식과 무관)
- **상태**: **유지**

### 2.3 인증 흐름도

#### 2.3.1 현재 일반 로그인 흐름 (제거 대상)

```
사용자 입력 (아이디/비밀번호)
    ↓
pages/login.tsx (onValid 함수)
    ↓
useMutation(usersApi.loginNextApi)
    ↓
POST /api/login (type: 'normal')
    ↓
usersApi.login(백엔드 API)
    ↓
POST https://api-global.xn--o22bp6a0zk.com/users/login/
    ↓
응답: { access_token: "..." }
    ↓
Set-Cookie: token=access_token (HttpOnly)
    ↓
GET /api/user (토큰 검증)
    ↓
mutate({ ok: true, token, profile })
    ↓
로그인 완료 → 리다이렉션
```

#### 2.3.2 SNS 로그인 흐름 (유지)

```
사용자 클릭 (Google/Naver 버튼)
    ↓
components/login/googleBtn.tsx
    ↓
OAuth 인증 프로세스 (팝업/리다이렉션)
    ↓
SNS 인증 완료 → 사용자 정보 획득
    ↓
useMutation(usersApi.loginNextApi)
    ↓
POST /api/login (type: 'google' or 'naver')
    ↓
usersApi.snsLogin(백엔드 API)
    ↓
POST https://api-global.xn--o22bp6a0zk.com/users/login/
    ↓
응답: { access_token: "...", msg?: "..." }
    ↓
Set-Cookie: token=access_token (HttpOnly)
    ↓
GET /api/user (토큰 검증)
    ↓
mutate({ ok: true, token, profile })
    ↓
로그인 완료 → 리다이렉션
```

### 2.4 API 구조

#### 백엔드 API 엔드포인트

**Base URL**: `https://api-global.xn--o22bp6a0zk.com`

**로그인 관련**:
- `POST /users/login/` - 통합 로그인 엔드포인트
  - `login_method: 'normal'` - 일반 로그인 (**제거 대상**)
  - `login_method: 'google'` - Google 로그인 (**유지**)
  - `login_method: 'naver'` - Naver 로그인 (**유지**)

**회원가입 관련** (모두 제거 대상):
- `POST /users/signup/` - 회원가입
- `POST /users/signup_code_gen/` - 회원가입 인증번호 발급
- `POST /users/code_gen/` - 인증번호 발급
- `GET /users/code_auth/` - 인증번호 확인
- `GET /users/check_id` - 아이디 중복 확인

**계정 찾기/복구** (모두 제거 대상):
- `GET /users/find_username/` - 아이디 찾기
- `POST /users/change_password/` - 비밀번호 재설정

**유지 API**:
- `GET /mypage/` - 마이페이지 정보
- `POST /mypage/` - 회원 정보 수정
- `POST /users/withdraw/` - 회원 탈퇴
- 기타 모든 마이페이지, 강의, 커뮤니티 API

### 2.5 보안 특성

**토큰 관리**:
- **저장 위치**: HttpOnly Cookie (`token` 키)
- **설정**: `tokenSettings` (파일 위치 확인 필요)
- **유효성 검증**: `/api/user` 엔드포인트를 통한 서버 사이드 검증

**인증 체크**:
- **클라이언트**: `useUser` 훅을 통한 SWR 기반 상태 관리
- **서버**: `withAuth` HOC를 통한 SSR 인증 체크

**보안 고려사항**:
- 일반 로그인 제거 후에도 토큰 기반 인증 방식은 유지
- SNS 로그인의 보안성은 OAuth 2.0 프로토콜에 의존
- 기존 토큰 관리 로직은 변경하지 않음

---

## 3. 의존성 분석

### 3.1 파일 분류

#### 완전 제거 (10개 파일)

**페이지**:
1. `/pages/signup.tsx` - 회원가입 페이지
2. `/pages/find-id.tsx` - 아이디 찾기 페이지
3. `/pages/reset-pw.tsx` - 비밀번호 재설정 페이지
4. `/pages/api/signup.ts` - 회원가입 API 라우트

**컴포넌트**:
5. `/components/find/idPopup.tsx` - 아이디 찾기 팝업
6. `/components/find/pwPopup.tsx` - 비밀번호 찾기 팝업

**참고**: `/components/find/` 디렉토리가 빈 디렉토리가 되면 삭제

#### 부분 수정 (3개 파일)

**API 라우트**:
1. `/pages/api/login.ts`
   - **제거**: `type === 'normal'` 조건문 및 일반 로그인 로직 (lines 11-21)
   - **유지**: SNS 로그인 로직 (lines 23-37)

**페이지**:
2. `/pages/login.tsx`
   - **제거**:
     - 일반 로그인 폼 UI (lines 79-181)
     - 회원가입 버튼 및 링크 (lines 186-191)
     - 아이디/비밀번호 찾기 링크 (lines 194-204)
   - **유지**:
     - SNS 로그인 버튼 (lines 206-211)
     - 페이지 구조, SEO, 이벤트 슬라이더

**API 클라이언트**:
3. `/libs/api.ts` (usersApi 객체)
   - **제거**: 12개 메서드 (아래 목록 참조)
   - **유지**: SNS 로그인, 로그아웃, 마이페이지 API

#### 유지 (의존성 있음)

**인증 관련**:
- `/libs/client/useUser.ts` - 사용자 인증 상태 훅
- `/libs/server/withAuth.ts` - 서버 사이드 인증 HOC
- `/libs/token.ts` - 토큰 설정 (파일 존재 추정)

**SNS 로그인 컴포넌트**:
- `/components/login/googleBtn.tsx` - Google 로그인 버튼
- `/components/login/naverBtn.tsx` - Naver 로그인 버튼 (주석 처리 상태, 필요시 활성화)
- `/components/login/eventSlider.tsx` - 로그인 페이지 이벤트 슬라이더

**기타**:
- `/components/input.tsx` - Input 컴포넌트 (다른 페이지에서도 사용)
- `/libs/client/useMutation.ts` - Mutation 훅 (다른 페이지에서도 사용)

### 3.2 의존 관계 맵

```
[제거 대상 페이지]
pages/signup.tsx
pages/find-id.tsx
pages/reset-pw.tsx
pages/api/signup.ts
    ↓ (사용)
[제거 대상 API 메서드]
usersApi.signupNextApi
usersApi.signup
usersApi.snsSignup (SNS 회원가입도 제거 검토 필요)
usersApi.checkId
usersApi.getSignupCode
usersApi.getCode
usersApi.checkCode
usersApi.findId
usersApi.resetPw
usersApi.login (백엔드 직접 호출)
usersApi.loginNextApi (부분 수정)
    ↓ (호출)
[백엔드 API]
POST /users/signup/
POST /users/login/ (login_method: 'normal')
GET /users/check_id
POST /users/signup_code_gen/
POST /users/code_gen/
GET /users/code_auth/
GET /users/find_username/
POST /users/change_password/
```

```
[유지 대상]
pages/login.tsx (부분 수정)
    ↓ (사용)
components/login/googleBtn.tsx
components/login/naverBtn.tsx
    ↓ (호출)
usersApi.snsLogin (유지)
usersApi.loginNextApi (부분 수정)
    ↓ (호출)
POST /api/login (type: 'google' or 'naver')
    ↓ (호출)
POST /users/login/ (login_method: 'google' or 'naver')
```

### 3.3 영향 범위 평가

#### 직접 영향 (Critical)

**제거로 인한 기능 손실**:
1. 일반 회원가입 불가 → SNS 회원가입으로 전환 필요
2. 아이디/비밀번호 로그인 불가 → SNS 로그인만 사용
3. 아이디 찾기 기능 불가
4. 비밀번호 재설정 기능 불가

**사용자 영향**:
- **기존 일반 회원**: SNS 계정 연동 필요 (마이그레이션 전략 필요)
- **신규 사용자**: SNS 계정으로만 가입 가능

#### 간접 영향 (Medium)

**네비게이션 링크**:
- `/pages/login.tsx`의 회원가입, 아이디 찾기, 비밀번호 찾기 링크 제거
- 헤더/푸터에 해당 링크가 있는지 확인 필요

**SEO 및 라우팅**:
- `/signup`, `/find-id`, `/reset-pw` 경로 접근 시 404 에러
- 기존 북마크, 검색엔진 인덱스 무효화

#### 무영향 (Low)

**유지되는 기능**:
- SNS 로그인 (Google, Naver)
- 로그아웃
- 마이페이지 (회원 정보 수정, 구매 내역 등)
- 강의, 커뮤니티, 이벤트 기능
- 토큰 기반 인증 시스템

---

## 4. 제거 전략

### 4.1 Phase별 상세 계획

#### Phase 1: 백업 및 환경 준비 (예상 시간: 1시간)

**목표**: 안전한 롤백을 위한 백업 및 개발 환경 설정

**작업 내용**:
1. **Git 브랜치 생성**
   ```bash
   git checkout -b feature/remove-email-login
   ```

2. **현재 상태 커밋**
   ```bash
   git add .
   git commit -m "chore: 이메일 로그인 제거 작업 시작 전 상태 저장"
   ```

3. **백업 태그 생성**
   ```bash
   git tag -a backup-before-email-login-removal -m "이메일 로그인 제거 전 백업"
   ```

4. **의존성 확인**
   ```bash
   npm install  # 패키지 설치 확인
   npm run dev  # 개발 서버 정상 실행 확인
   ```

**체크리스트**:
- [ ] 브랜치 생성 완료
- [ ] 현재 코드 커밋 완료
- [ ] 백업 태그 생성 완료
- [ ] 개발 서버 정상 실행 확인

**위험도**: 낮음

---

#### Phase 2: 페이지 및 API 라우트 제거 (예상 시간: 2시간)

**목표**: 사용자 대면 페이지 및 API 엔드포인트 제거

**작업 순서**:

**Step 1: 회원가입 관련 파일 제거**
```bash
# 페이지 제거
rm /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/signup.tsx
rm /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/api/signup.ts

# 커밋
git add .
git commit -m "feat: 회원가입 페이지 및 API 제거"
```

**Step 2: 아이디/비밀번호 찾기 페이지 제거**
```bash
# 페이지 제거
rm /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/find-id.tsx
rm /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/reset-pw.tsx

# 커밋
git add .
git commit -m "feat: 아이디 찾기, 비밀번호 재설정 페이지 제거"
```

**Step 3: 제거 확인**
```bash
# 개발 서버 재시작
npm run dev

# 다음 경로 접근 시 404 확인
# - http://localhost:3000/signup
# - http://localhost:3000/find-id
# - http://localhost:3000/reset-pw
```

**체크리스트**:
- [ ] signup.tsx 제거 완료
- [ ] api/signup.ts 제거 완료
- [ ] find-id.tsx 제거 완료
- [ ] reset-pw.tsx 제거 완료
- [ ] 각 페이지 404 에러 확인
- [ ] 개발 서버 정상 실행 확인

**위험도**: 중간 (페이지 제거 후 링크 깨짐 가능)

---

#### Phase 3: 컴포넌트 제거 및 login.tsx 수정 (예상 시간: 3시간)

**목표**: UI 컴포넌트 제거 및 로그인 페이지 SNS 전용으로 변경

**Step 1: 팝업 컴포넌트 제거**
```bash
# 컴포넌트 제거
rm /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/find/idPopup.tsx
rm /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/find/pwPopup.tsx

# 디렉토리 확인 (비어있으면 제거)
rmdir /Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/find/

# 커밋
git add .
git commit -m "feat: 아이디/비밀번호 찾기 팝업 컴포넌트 제거"
```

**Step 2: login.tsx 파일 수정**

**제거 대상**:
1. **Import 제거**:
   ```typescript
   // 제거: Input, useForm (더 이상 필요 없음)
   import Input from '@components/input';
   import { FieldErrors, useForm } from 'react-hook-form';
   ```

2. **State 제거**:
   ```typescript
   // 제거: 일반 로그인 관련 state
   const [isLoginOpened, setIsLoginOpened] = useState(false);
   const scrollRef = useRef<HTMLFormElement>(null);
   ```

3. **Form 로직 제거**:
   ```typescript
   // 제거: useForm, onValid, onInvalid 함수
   const { register, handleSubmit, formState: { errors } } = useForm<IForm>({
     mode: 'onChange',
   });
   const onValid = async (data: IForm) => { ... };
   const onInvalid = (errors: FieldErrors) => { ... };
   ```

4. **UI 제거**:
   - 아이디 로그인 버튼 (lines 79-91)
   - 일반 로그인 폼 (lines 92-182)
   - 회원가입 버튼 (lines 186-191)
   - 아이디/비밀번호 찾기 링크 (lines 194-204)

**수정 후 코드 구조**:
```tsx
import SEO from '@components/seo';
import type { NextPage } from 'next';
import { useUser } from '@libs/client/useUser';
import GoogleBtn from '@components/login/googleBtn';
import NaverBtn from '@components/login/naverBtn';
import EventSlider from '@components/login/eventSlider';

const Login: NextPage = () => {
  const { mutate } = useUser({
    isPrivate: false,
  });

  return (
    <>
      <SEO
        title='로그인'
        description='밀레니얼 머니스쿨 로그인 페이지 입니다.'
      />
      <div className='mx-auto my-28 flex max-w-[32.5rem] flex-col items-center rounded-lg bg-[#373c46] p-[3.75rem] md:my-12 md:max-w-[330px] md:bg-transparent md:p-0'>
        <h1 className='text-2xl font-medium md:text-xl'>로그인</h1>

        {/* 슬라이더 */}
        <EventSlider />

        <div className='mt-8 flex w-full justify-center'>
          <div className='w-[330px] space-y-2'>
            {/* Naver 로그인 버튼 (필요시 활성화) */}
            {/* <NaverBtn /> */}
            <GoogleBtn />
          </div>
        </div>
      </div>
    </>
  );
};

export default Login;
```

**커밋**:
```bash
git add pages/login.tsx
git commit -m "feat: 로그인 페이지를 SNS 전용으로 변경"
```

**Step 3: 수정 확인**
```bash
# 개발 서버 재시작
npm run dev

# 테스트
# 1. http://localhost:3000/login 접속
# 2. Google 로그인 버튼만 표시되는지 확인
# 3. 회원가입, 아이디/비밀번호 찾기 링크 없는지 확인
```

**체크리스트**:
- [ ] idPopup.tsx, pwPopup.tsx 제거 완료
- [ ] /components/find/ 디렉토리 삭제 확인
- [ ] login.tsx 수정 완료
- [ ] 불필요한 import 제거 완료
- [ ] 일반 로그인 UI 완전 제거 확인
- [ ] SNS 로그인 버튼 정상 표시 확인
- [ ] TypeScript 컴파일 에러 없음 확인

**위험도**: 높음 (로그인 페이지 주요 변경)

---

#### Phase 4: API 클라이언트 정리 (예상 시간: 2시간)

**목표**: `/libs/api.ts`에서 일반 로그인 관련 API 메서드 제거

**Step 1: api.ts 파일 수정**

**제거 대상 메서드** (usersApi 객체):
```typescript
// 제거할 메서드 목록 (12개)
checkId,              // Line 18-19
getSignupCode,        // Lines 22-25
getCode,              // Lines 28-32
checkCode,            // Lines 35-41
signupNextApi,        // Line 44
signup,               // Lines 47-64
snsSignup,            // Lines 66-74 (SNS 회원가입도 제거)
loginNextApi,         // Line 77 (부분 수정 필요 - 아래 참조)
login,                // Lines 79-84
findId,               // Lines 99-100
resetPw,              // Lines 103-104
```

**loginNextApi 처리**:
- 완전 제거하지 않고, `/pages/api/login.ts`에서 계속 사용됨
- **유지하되, 호출 시 `type: 'normal'` 전달하지 않도록 주의**

**수정 후 usersApi 구조**:
```typescript
export const usersApi = {
  // SNS 로그인 (유지)
  snsLogin: ({ type, id, phone_number, nickname, is_signup, ad_agree }: IProps) =>
    api.post('/users/login/', {
      login_method: type,
      sns_id: id,
      phone_number,
      nickname,
      is_signup,
      ad_agree
    }),

  // 로그아웃 (NextJS API) (유지)
  logoutNextApi: () => axios.post('/api/logout'),

  // 마이페이지 관련 API (모두 유지)
  myInfos: (token: string) => ...,
  editInfos: ({...}: IProps) => ...,
  withdraw: ({...}: IProps) => ...,
  myNotificationList: (page: string, token: string) => ...,
  readNotification: (id: number, token: string) => ...,
  readAllNotification: (token: string) => ...,
  deleteNotification: (id: number, token: string) => ...,
  deleteAllNotification: (token: string) => ...,
  myLectureList: (completed: boolean, page: string, token: string) => ...,
  myCommunityList: (page: string, token: string) => ...,
  myPurchaseList: (page: string, token: string) => ...,
  myCouponList: (page: string, token: string) => ...,
  myPointList: (page: string, token: string) => ...,
  requestRefund: (merchant_uid: string, reason: string, token: string) => ...,
};
```

**커밋**:
```bash
git add libs/api.ts
git commit -m "feat: 일반 로그인 관련 API 메서드 제거"
```

**Step 2: /pages/api/login.ts 수정**

**현재 코드**:
```typescript
const handler = async (req: NextApiRequest, res: NextApiResponse) => {
  const { type } = req.body;
  try {
    // 일반 로그인 (제거 대상)
    if (type === 'normal') {
      const {
        data: { access_token },
      } = await usersApi.login(req.body);

      res.setHeader(
        'Set-Cookie',
        serialize('token', access_token, tokenSettings)
      );
      return res.status(200).json({ ok: true });
    }
    // sns 로그인 (유지)
    else {
      const {
        data: { msg, access_token },
      } = await usersApi.snsLogin(req.body);
      if (msg) {
        return res.status(200).json({ ok: true, msg });
      }
      if (access_token) {
        res.setHeader(
          'Set-Cookie',
          serialize('token', access_token, tokenSettings)
        );
        return res.status(200).json({ ok: true });
      }
    }
  } catch (error) {
    return res.status(500).json({ error });
  }
};
```

**수정 후 코드**:
```typescript
const handler = async (req: NextApiRequest, res: NextApiResponse) => {
  try {
    // SNS 로그인만 처리
    const {
      data: { msg, access_token },
    } = await usersApi.snsLogin(req.body);

    if (msg) {
      return res.status(200).json({ ok: true, msg });
    }

    if (access_token) {
      res.setHeader(
        'Set-Cookie',
        serialize('token', access_token, tokenSettings)
      );
      return res.status(200).json({ ok: true });
    }
  } catch (error) {
    return res.status(500).json({ error });
  }
};
```

**커밋**:
```bash
git add pages/api/login.ts
git commit -m "feat: /api/login에서 일반 로그인 로직 제거"
```

**Step 3: 사용되지 않는 import 제거**

**확인 필요 파일**:
- `pages/login.tsx` - Input, useForm import 제거 확인
- `pages/api/login.ts` - 불필요한 import 제거

**체크리스트**:
- [ ] api.ts에서 12개 메서드 제거 완료
- [ ] usersApi 구조 정리 완료
- [ ] /api/login.ts 수정 완료
- [ ] 불필요한 import 제거 확인
- [ ] TypeScript 컴파일 에러 없음 확인

**위험도**: 중간 (API 호출 중단 가능)

---

#### Phase 5: 검증 및 테스트 (예상 시간: 2시간)

**목표**: 제거 작업 완료 후 전체 기능 검증

**Step 1: TypeScript 컴파일 검증**
```bash
npx tsc --noEmit
```
- 모든 타입 에러 해결 확인
- 사용되지 않는 import 제거 확인

**Step 2: 개발 서버 실행 확인**
```bash
npm run dev
```
- 에러 없이 서버 실행 확인
- 콘솔 경고 메시지 확인 및 해결

**Step 3: 수동 테스트 (체크리스트)**

**제거된 기능 확인**:
- [ ] `/signup` 접속 → 404 에러
- [ ] `/find-id` 접속 → 404 에러
- [ ] `/reset-pw` 접속 → 404 에러
- [ ] `/login` 페이지에 일반 로그인 폼 없음
- [ ] `/login` 페이지에 회원가입 링크 없음
- [ ] `/login` 페이지에 아이디/비밀번호 찾기 링크 없음

**유지된 기능 확인**:
- [ ] `/login` 페이지 정상 렌더링
- [ ] Google 로그인 버튼 표시
- [ ] Google 로그인 클릭 시 OAuth 팝업 정상 동작
- [ ] Google 로그인 성공 후 토큰 발급 확인
- [ ] 로그인 후 리다이렉션 정상 동작
- [ ] 로그아웃 기능 정상 동작
- [ ] 마이페이지 접근 (로그인 필요)
- [ ] 인증이 필요한 페이지 리다이렉션 (withAuth)

**Step 4: 통합 테스트**
```bash
# 빌드 테스트
npm run build

# 프로덕션 모드 실행
npm run start
```
- 빌드 에러 없음 확인
- 프로덕션 모드 정상 실행 확인

**Step 5: 최종 커밋**
```bash
git add .
git commit -m "test: 이메일 로그인 제거 작업 완료 및 검증"
```

**체크리스트**:
- [ ] TypeScript 컴파일 성공
- [ ] 개발 서버 정상 실행
- [ ] 제거된 페이지 404 확인
- [ ] SNS 로그인 정상 동작
- [ ] 로그아웃 정상 동작
- [ ] 인증 흐름 정상 동작
- [ ] 빌드 성공
- [ ] 프로덕션 모드 정상 실행

**위험도**: 낮음 (검증 단계)

---

### 4.2 실행 순서 및 우선순위

**우선순위**:
1. **Critical (P0)**: Phase 1, 2, 5 - 백업, 페이지 제거, 검증
2. **High (P1)**: Phase 3, 4 - 컴포넌트 수정, API 정리
3. **Medium (P2)**: 문서화, 마이그레이션 가이드 작성

**실행 순서**:
```
Phase 1 (백업)
    → Phase 2 (페이지 제거)
    → Phase 3 (컴포넌트 수정)
    → Phase 4 (API 정리)
    → Phase 5 (검증)
```

**병렬 처리 불가**: 모든 Phase는 순차적으로 진행 필요 (의존성 있음)

### 4.3 체크리스트

#### 사전 체크리스트
- [ ] 프로젝트 백업 완료
- [ ] 개발 환경 정상 동작 확인
- [ ] 브랜치 생성 및 커밋 완료
- [ ] 팀원에게 작업 공지

#### Phase별 체크리스트
- [ ] Phase 1 완료 (백업)
- [ ] Phase 2 완료 (페이지 제거)
- [ ] Phase 3 완료 (컴포넌트 수정)
- [ ] Phase 4 완료 (API 정리)
- [ ] Phase 5 완료 (검증)

#### 최종 체크리스트
- [ ] 모든 TypeScript 에러 해결
- [ ] 개발 서버 정상 실행
- [ ] SNS 로그인 정상 동작
- [ ] 제거된 페이지 404 확인
- [ ] 빌드 성공
- [ ] PR 생성 및 코드 리뷰 요청

---

## 5. 위험 관리

### 5.1 잠재적 위험

#### 기능적 위험

**R1. 기존 일반 회원 로그인 불가**
- **설명**: 일반 로그인 제거 후 기존 아이디/비밀번호 회원은 로그인 불가
- **영향도**: 높음 (Critical)
- **발생 확률**: 100%
- **영향 받는 사용자**: 모든 일반 회원

**R2. 회원가입 경로 단절**
- **설명**: 일반 회원가입 제거 후 SNS 계정 없는 사용자는 가입 불가
- **영향도**: 높음 (Critical)
- **발생 확률**: 100%
- **영향 받는 사용자**: SNS 계정이 없는 신규 사용자

**R3. 계정 복구 기능 상실**
- **설명**: 아이디 찾기, 비밀번호 재설정 기능 제거
- **영향도**: 중간 (High)
- **발생 확률**: 100%
- **영향 받는 사용자**: 계정 정보를 잊어버린 일반 회원

#### 보안적 위험

**R4. SNS 계정 의존성**
- **설명**: 인증이 Google/Naver OAuth에 완전히 의존
- **영향도**: 중간 (Medium)
- **발생 확률**: 낮음 (10%)
- **리스크**: SNS 서비스 장애 시 로그인 불가

**R5. 토큰 관리 변경 없음**
- **설명**: 기존 토큰 관리 로직은 유지되므로 보안 위험 없음
- **영향도**: 낮음 (Low)
- **발생 확률**: 없음 (0%)

#### 사용자 경험 위험

**R6. 외부 링크 및 북마크 무효화**
- **설명**: `/signup`, `/find-id`, `/reset-pw` 링크가 404 에러
- **영향도**: 낮음 (Low)
- **발생 확률**: 높음 (80%)
- **영향 받는 사용자**: 기존 링크를 저장한 사용자

**R7. SEO 영향**
- **설명**: 검색엔진에 인덱스된 페이지가 404 에러
- **영향도**: 중간 (Medium)
- **발생 확률**: 높음 (80%)
- **영향**: 검색 유입 감소 가능

#### 데이터 위험

**R8. 기존 일반 회원 데이터**
- **설명**: 일반 회원 데이터는 DB에 유지되나 로그인 불가
- **영향도**: 높음 (Critical)
- **발생 확률**: 100%
- **리스크**: 데이터 손실 없으나 접근 불가

### 5.2 완화 방안

#### R1, R2, R3 완화: 계정 마이그레이션 가이드

**단기 해결책**:
1. **공지 팝업 추가**
   - 로그인 페이지에 "일반 로그인 종료 안내" 팝업 표시
   - SNS 계정 연동 방법 안내

2. **계정 연동 기능 개발** (별도 작업)
   - 기존 아이디/비밀번호로 로그인 후 SNS 계정 연동
   - 연동 완료 후 일반 로그인 정보 삭제

**장기 해결책**:
1. **백엔드 마이그레이션 API 개발**
   - `POST /users/migrate-to-sns/`
   - 기존 계정 정보 검증 후 SNS 계정과 연동

2. **사용자 안내 이메일 발송**
   - 일반 회원에게 계정 마이그레이션 안내
   - 마이그레이션 기한 설정 (예: 3개월)

#### R4 완화: SNS 계정 의존성

**완화 방안**:
1. **다중 SNS 지원**
   - Google, Naver 외에 Kakao, Apple 추가 검토
   - 하나의 SNS 서비스 장애 시 대안 제공

2. **모니터링 강화**
   - SNS OAuth 서비스 상태 모니터링
   - 장애 발생 시 알림 시스템

#### R6, R7 완화: 링크 및 SEO

**완화 방안**:
1. **301 리다이렉트 추가**
   - `/signup` → `/login` (SNS 로그인)
   - `/find-id` → `/login` (안내 메시지 표시)
   - `/reset-pw` → `/login` (안내 메시지 표시)

2. **robots.txt 업데이트**
   - 제거된 페이지를 검색엔진 크롤링 제외
   - `Disallow: /signup`, `Disallow: /find-id`, `Disallow: /reset-pw`

3. **안내 페이지 생성**
   - 제거된 페이지 접근 시 친절한 안내 메시지
   - SNS 로그인 방법 안내

#### R8 완화: 기존 회원 데이터

**완화 방안**:
1. **데이터 보존**
   - 백엔드 DB에서 일반 회원 데이터 유지
   - 마이그레이션 기간 동안 데이터 보존

2. **데이터 정리 정책**
   - 마이그레이션 기한 경과 후 데이터 정리
   - 사용자 동의 후 데이터 삭제 또는 익명화

### 5.3 롤백 계획

#### 롤백 트리거 조건
1. **Critical 버그 발견**: SNS 로그인 완전 불가
2. **사용자 불만 폭발**: 대규모 사용자 이탈
3. **비즈니스 요구**: 경영진 결정으로 일반 로그인 복구 필요

#### 롤백 절차

**즉시 롤백 (15분 이내)**:
```bash
# 1. 백업 브랜치로 전환
git checkout main

# 2. 백업 태그로 복구
git reset --hard backup-before-email-login-removal

# 3. 강제 푸시 (주의!)
git push origin main --force

# 4. 서버 재배포
npm run build
# 배포 스크립트 실행
```

**점진적 롤백 (1시간 이내)**:
```bash
# 1. 롤백 브랜치 생성
git checkout -b rollback/email-login-restoration

# 2. 백업 태그의 변경 사항을 현재 브랜치에 적용
git cherry-pick backup-before-email-login-removal

# 3. 충돌 해결 및 테스트
npm run dev
# 테스트 진행

# 4. PR 생성 및 배포
git push origin rollback/email-login-restoration
# PR 생성 및 리뷰
```

#### 롤백 후 조치
1. **원인 분석**: 왜 롤백이 필요했는지 분석
2. **개선 계획**: 문제 해결 방안 수립
3. **재시도 일정**: 문제 해결 후 재시도 계획

---

## 6. 테스트 전략

### 6.1 제거 전 검증

#### 사전 테스트 체크리스트

**현재 기능 정상 동작 확인**:
- [ ] 일반 로그인 정상 동작 (제거 전 마지막 확인)
- [ ] Google 로그인 정상 동작
- [ ] Naver 로그인 정상 동작 (주석 해제 후)
- [ ] 회원가입 정상 동작
- [ ] 아이디 찾기 정상 동작
- [ ] 비밀번호 재설정 정상 동작
- [ ] 로그아웃 정상 동작
- [ ] 마이페이지 접근 (인증 필요)

**테스트 환경**:
- 브라우저: Chrome, Safari, Firefox
- 디바이스: Desktop, Mobile (반응형)
- 네트워크: 정상, 느린 3G

### 6.2 제거 후 검증

#### 기능 테스트

**제거 확인 테스트**:
| 항목 | 테스트 방법 | 예상 결과 |
|------|------------|----------|
| 일반 로그인 폼 | `/login` 접속 | 폼 없음, SNS 버튼만 표시 |
| 회원가입 페이지 | `/signup` 접속 | 404 에러 또는 리다이렉트 |
| 아이디 찾기 | `/find-id` 접속 | 404 에러 또는 리다이렉트 |
| 비밀번호 재설정 | `/reset-pw` 접속 | 404 에러 또는 리다이렉트 |
| 회원가입 링크 | `/login` 페이지 확인 | 링크 없음 |
| 아이디/비밀번호 찾기 링크 | `/login` 페이지 확인 | 링크 없음 |

**유지 기능 테스트**:
| 항목 | 테스트 방법 | 예상 결과 |
|------|------------|----------|
| Google 로그인 | Google 버튼 클릭 | OAuth 팝업 정상 표시 |
| Google 로그인 성공 | 인증 완료 | 토큰 발급, 리다이렉션 |
| 로그아웃 | 로그아웃 버튼 클릭 | 쿠키 삭제, `/login`으로 이동 |
| 인증 상태 확인 | `/api/user` 호출 | 토큰 기반 인증 정상 |
| 마이페이지 접근 | `/mypage` 접속 (비로그인) | `/login`으로 리다이렉트 |
| 마이페이지 접근 | `/mypage` 접속 (로그인) | 정상 접근 |

#### 통합 테스트

**E2E 시나리오**:

**시나리오 1: SNS 로그인 → 강의 구매 → 로그아웃**
```
1. /login 접속
2. Google 로그인 클릭
3. OAuth 인증 완료
4. 메인 페이지로 리다이렉션
5. 강의 상세 페이지 접속
6. 구매 버튼 클릭
7. 결제 진행
8. 마이페이지에서 구매 내역 확인
9. 로그아웃
```

**시나리오 2: 비로그인 상태 → 인증 필요 페이지 접근**
```
1. 비로그인 상태 확인
2. /mypage 접속 시도
3. /login으로 리다이렉션 확인
4. Google 로그인
5. /mypage로 다시 리다이렉션 확인
```

**시나리오 3: 제거된 페이지 접근**
```
1. /signup 직접 URL 입력
2. 404 에러 또는 /login 리다이렉션 확인
3. /find-id 직접 URL 입력
4. 404 에러 또는 /login 리다이렉션 확인
5. /reset-pw 직접 URL 입력
6. 404 에러 또는 /login 리다이렉션 확인
```

#### 회귀 테스트

**영향 받을 수 있는 기능**:
- [ ] 커뮤니티 글 작성 (인증 필요)
- [ ] 강의 리뷰 작성 (인증 필요)
- [ ] 쿠폰 다운로드 (인증 필요)
- [ ] 포인트 사용 (인증 필요)
- [ ] 환불 요청 (인증 필요)

**테스트 방법**:
1. SNS 로그인으로 인증
2. 각 기능 정상 동작 확인
3. 토큰 기반 API 호출 정상 확인

### 6.3 통합 테스트

#### 성능 테스트

**측정 항목**:
- 로그인 페이지 로딩 속도
- Google OAuth 팝업 응답 속도
- 토큰 발급 및 인증 응답 속도

**성능 기준**:
- 로그인 페이지 로딩: <2초
- OAuth 팝업 표시: <1초
- 토큰 발급 응답: <500ms

#### 보안 테스트

**테스트 항목**:
- [ ] HttpOnly Cookie 설정 확인
- [ ] 토큰 유효성 검증 확인
- [ ] CSRF 보호 확인 (필요시)
- [ ] XSS 공격 방어 확인

**테스트 도구**:
- Chrome DevTools (Network, Application 탭)
- Postman (API 테스트)

#### 접근성 테스트

**테스트 항목**:
- [ ] 키보드 네비게이션 (Tab, Enter)
- [ ] 스크린 리더 호환성 (NVDA, VoiceOver)
- [ ] 색상 대비 (WCAG AA 기준)
- [ ] 포커스 표시 (Focus visible)

**도구**:
- axe DevTools
- Lighthouse (Chrome)

---

## 7. 실행 로드맵

### 7.1 타임라인 (3-4주)

#### Week 1: 준비 및 계획 (5일)

**Day 1-2: 분석 및 문서화**
- 현재 시스템 분석 완료
- 의존성 맵 작성
- 위험 평가 완료
- 설계서 작성 및 검토

**Day 3: 환경 준비**
- 개발 브랜치 생성
- 백업 완료
- 팀 공지 및 리뷰

**Day 4-5: 테스트 계획**
- 테스트 시나리오 작성
- 테스트 환경 구축
- 자동화 테스트 스크립트 준비 (선택)

#### Week 2: 구현 (5일)

**Day 1 (Phase 1, 2)**:
- 백업 완료
- 페이지 제거 (signup, find-id, reset-pw)
- 커밋 및 푸시

**Day 2 (Phase 3)**:
- 컴포넌트 제거 (find/)
- login.tsx 수정
- 테스트 및 커밋

**Day 3 (Phase 4)**:
- api.ts 수정
- /api/login.ts 수정
- 테스트 및 커밋

**Day 4 (Phase 5)**:
- TypeScript 컴파일 검증
- 수동 테스트
- 통합 테스트

**Day 5: 버퍼**
- 예상치 못한 이슈 해결
- 추가 테스트

#### Week 3: 검증 및 QA (5일)

**Day 1-2: 기능 테스트**
- 제거 확인 테스트
- 유지 기능 테스트
- E2E 시나리오 테스트

**Day 3: 성능 및 보안 테스트**
- 성능 측정
- 보안 점검
- 접근성 테스트

**Day 4: 회귀 테스트**
- 영향 받는 기능 전수 테스트
- 크로스 브라우저 테스트
- 모바일 테스트

**Day 5: 버그 수정**
- 발견된 버그 수정
- 재테스트

#### Week 4: 배포 및 모니터링 (5일)

**Day 1: 배포 준비**
- PR 생성 및 코드 리뷰
- 배포 체크리스트 확인
- 롤백 계획 재확인

**Day 2: 스테이징 배포**
- 스테이징 환경 배포
- 최종 검증
- 피드백 수집

**Day 3: 프로덕션 배포**
- 프로덕션 배포
- 실시간 모니터링
- 긴급 대응 체계 가동

**Day 4-5: 모니터링 및 안정화**
- 사용자 피드백 수집
- 에러 로그 모니터링
- 필요시 핫픽스 배포

### 7.2 마일스톤

**M1: 분석 완료 (Week 1 완료)**
- 설계서 작성 완료
- 팀 리뷰 완료
- 리스크 평가 완료

**M2: 구현 완료 (Week 2 완료)**
- Phase 1-5 모두 완료
- 모든 커밋 완료
- 기본 테스트 통과

**M3: 검증 완료 (Week 3 완료)**
- 모든 테스트 통과
- 버그 수정 완료
- 배포 준비 완료

**M4: 배포 완료 (Week 4 완료)**
- 프로덕션 배포 완료
- 안정화 완료
- 프로젝트 종료 보고

### 7.3 성공 지표

**기술적 지표**:
- ✅ TypeScript 컴파일 에러 0건
- ✅ 개발/프로덕션 빌드 성공률 100%
- ✅ SNS 로그인 성공률 ≥95%
- ✅ 페이지 로딩 속도 <2초
- ✅ API 응답 속도 <500ms

**기능적 지표**:
- ✅ 제거된 페이지 404 처리율 100%
- ✅ SNS 로그인 정상 동작
- ✅ 로그아웃 정상 동작
- ✅ 인증 흐름 정상 동작
- ✅ 마이페이지 접근 정상

**품질 지표**:
- ✅ 코드 리뷰 승인 획득
- ✅ QA 테스트 통과
- ✅ 회귀 테스트 통과
- ✅ 보안 점검 통과
- ✅ 접근성 기준 만족 (WCAG AA)

**사용자 지표** (배포 후 1주일):
- ✅ SNS 로그인 사용률 ≥80%
- ✅ 로그인 성공률 ≥90%
- ✅ 사용자 불만 건수 <10건
- ✅ 에러율 <1%

---

## 8. 부록

### 8.1 제거 대상 파일 전체 목록

#### 페이지 파일 (4개)
```
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/signup.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/find-id.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/reset-pw.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/api/signup.ts
```

#### 컴포넌트 파일 (2개)
```
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/find/idPopup.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/find/pwPopup.tsx
```

#### 수정 필요 파일 (3개)
```
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/login.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/pages/api/login.ts
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/libs/api.ts
```

#### 유지 파일 (인증 관련)
```
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/libs/client/useUser.ts
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/libs/server/withAuth.ts
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/login/googleBtn.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/login/naverBtn.tsx
/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/components/login/eventSlider.tsx
```

### 8.2 제거할 API 메서드 목록

#### usersApi 객체 (libs/api.ts)

**완전 제거 (11개)**:
```typescript
1. checkId: (username: string) => ...                                    // Line 18-19
2. getSignupCode: (phoneNum: string) => ...                              // Lines 22-25
3. getCode: (phone_number: string, username?: string) => ...             // Lines 28-32
4. checkCode: (phone_number: string, code: string) => ...                // Lines 35-41
5. signupNextApi: (req: IProps) => ...                                   // Line 44
6. signup: ({name, nickname, phoneNum, username, password, adAgree}: IProps) => ... // Lines 47-64
7. snsSignup: ({type, id, name, phoneNum, nickname, adAgree}: IProps) => ... // Lines 66-74
8. loginNextApi: (req: IProps) => ...                                    // Line 77 (재검토 필요)
9. login: ({username, password}: IProps) => ...                          // Lines 79-84
10. findId: (phoneNum: string) => ...                                    // Lines 99-100
11. resetPw: (username: string, password: string) => ...                 // Lines 103-104
```

**재검토 필요**:
- `loginNextApi`: `/pages/api/login.ts`에서 사용 중이므로 완전 제거 불가
  - 대안: `pages/login.tsx`에서 `usersApi.snsLogin`을 직접 호출하도록 변경 후 제거
  - 또는: 유지하되 `type: 'normal'` 전달 금지

**유지 (15개)**:
```typescript
snsLogin                    // SNS 로그인
logoutNextApi              // 로그아웃
myInfos                    // 마이페이지 정보
editInfos                  // 회원 정보 수정
withdraw                   // 회원 탈퇴
myNotificationList         // 알림 리스트
readNotification           // 알림 읽기
readAllNotification        // 알림 모두 읽기
deleteNotification         // 알림 삭제
deleteAllNotification      // 알림 모두 삭제
myLectureList              // 내 강의 리스트
myCommunityList            // 커뮤니티 리스트
myPurchaseList             // 구매 리스트
myCouponList               // 쿠폰 리스트
myPointList                // 포인트 리스트
requestRefund              // 환불 요청
```

### 8.3 코드 예제 (주요 수정 부분)

#### 예제 1: login.tsx 수정 (Before/After)

**Before** (현재 코드 - 일부 발췌):
```tsx
const Login: NextPage = () => {
  const [login, { loading, error }] = useMutation(usersApi.loginNextApi);
  const [isLoginOpened, setIsLoginOpened] = useState(false);
  const { register, handleSubmit, formState: { errors } } = useForm<IForm>({
    mode: 'onChange',
  });

  const onValid = async (data: IForm) => {
    const req = { type: 'normal', username: data.username, password: data.password };
    await login({ req });
    const { data: { token, profile } } = await axios.get('/api/user');
    mutate({ ok: true, token, profile });
  };

  return (
    <>
      <button onClick={() => setIsLoginOpened(true)}>아이디 로그인</button>
      <form onSubmit={handleSubmit(onValid, onInvalid)}>
        <Input label='아이디' register={register('username', { required: true })} />
        <Input label='비밀번호' type='password' register={register('password', { required: true })} />
        <button type='submit'>로그인</button>
      </form>
      <Link href='/signup'><a>회원가입</a></Link>
      <Link href='/find-id'><a>아이디 찾기</a></Link>
      <Link href='/reset-pw'><a>비밀번호 찾기</a></Link>
      <GoogleBtn />
    </>
  );
};
```

**After** (수정 후):
```tsx
const Login: NextPage = () => {
  const { mutate } = useUser({ isPrivate: false });

  return (
    <>
      <SEO title='로그인' description='밀레니얼 머니스쿨 로그인 페이지 입니다.' />
      <div className='mx-auto my-28 flex max-w-[32.5rem] flex-col items-center rounded-lg bg-[#373c46] p-[3.75rem] md:my-12 md:max-w-[330px] md:bg-transparent md:p-0'>
        <h1 className='text-2xl font-medium md:text-xl'>로그인</h1>

        <EventSlider />

        <div className='mt-8 flex w-full justify-center'>
          <div className='w-[330px] space-y-2'>
            <GoogleBtn />
            {/* <NaverBtn /> */}
          </div>
        </div>
      </div>
    </>
  );
};
```

**주요 변경사항**:
- ✅ `useMutation`, `useForm` 제거
- ✅ 일반 로그인 폼 전체 제거
- ✅ 회원가입, 아이디 찾기, 비밀번호 찾기 링크 제거
- ✅ SNS 로그인 버튼만 유지

---

#### 예제 2: /api/login.ts 수정 (Before/After)

**Before**:
```typescript
const handler = async (req: NextApiRequest, res: NextApiResponse) => {
  const { type } = req.body;
  try {
    if (type === 'normal') {
      const { data: { access_token } } = await usersApi.login(req.body);
      res.setHeader('Set-Cookie', serialize('token', access_token, tokenSettings));
      return res.status(200).json({ ok: true });
    } else {
      const { data: { msg, access_token } } = await usersApi.snsLogin(req.body);
      if (msg) return res.status(200).json({ ok: true, msg });
      if (access_token) {
        res.setHeader('Set-Cookie', serialize('token', access_token, tokenSettings));
        return res.status(200).json({ ok: true });
      }
    }
  } catch (error) {
    return res.status(500).json({ error });
  }
};
```

**After**:
```typescript
const handler = async (req: NextApiRequest, res: NextApiResponse) => {
  try {
    // SNS 로그인만 처리
    const { data: { msg, access_token } } = await usersApi.snsLogin(req.body);

    if (msg) {
      return res.status(200).json({ ok: true, msg });
    }

    if (access_token) {
      res.setHeader('Set-Cookie', serialize('token', access_token, tokenSettings));
      return res.status(200).json({ ok: true });
    }
  } catch (error) {
    return res.status(500).json({ error });
  }
};
```

**주요 변경사항**:
- ✅ `type === 'normal'` 조건문 제거
- ✅ `usersApi.login` 호출 제거
- ✅ SNS 로그인 로직만 유지

---

#### 예제 3: libs/api.ts 수정 (Before/After)

**Before** (일부 발췌):
```typescript
export const usersApi = {
  checkId: (username: string) => api.get(`/users/check_id?username=${username}`),
  getSignupCode: (phoneNum: string) => api.post('/users/signup_code_gen/', { phone_number: phoneNum }),
  getCode: (phone_number: string, username?: string) => api.post('/users/code_gen/', { phone_number, ...(username && { username }) }),
  checkCode: (phone_number: string, code: string) => api.get('/users/code_auth/', { params: { phone_number, code } }),
  signupNextApi: (req: IProps) => axios.post('/api/signup', req),
  signup: ({ type, name, nickname, phoneNum, username, password, adAgree }: IProps) => api.post('/users/signup/', { ... }),
  snsSignup: ({ type, id, name, phoneNum, nickname, adAgree }: IProps) => api.post('/users/signup/', { ... }),
  loginNextApi: (req: IProps) => axios.post('/api/login', req),
  login: ({ username, password }: IProps) => api.post('/users/login/', { login_method: 'normal', username, password }),
  snsLogin: ({ type, id, phone_number, nickname, is_signup, ad_agree }: IProps) => api.post('/users/login/', { ... }),
  logoutNextApi: () => axios.post('/api/logout'),
  findId: (phoneNum: string) => api.get(`/users/find_username/?phone_number=${phoneNum}`),
  resetPw: (username: string, password: string) => api.post('/users/change_password/', { username, password }),
  myInfos: (token: string) => api.get('/mypage/', { ... }),
  // ... 기타 마이페이지 API
};
```

**After**:
```typescript
export const usersApi = {
  // SNS 로그인 (유지)
  snsLogin: ({ type, id, phone_number, nickname, is_signup, ad_agree }: IProps) =>
    api.post('/users/login/', {
      login_method: type,
      sns_id: id,
      phone_number,
      nickname,
      is_signup,
      ad_agree
    }),

  // 로그아웃 (유지)
  logoutNextApi: () => axios.post('/api/logout'),

  // 마이페이지 관련 API (모두 유지)
  myInfos: (token: string) =>
    api.get('/mypage/', {
      headers: {
        Authorization: token,
        'Content-Type': 'application/json',
      },
    }),

  editInfos: ({ name, nickname, phoneNum, password, adAgree, token }: IProps) =>
    api.post('/mypage/', { ... }, { headers: { ... } }),

  withdraw: ({ withdrawalReason, token }: IProps) =>
    api.post('/users/withdraw/', { ... }, { headers: { ... } }),

  // ... 기타 마이페이지 API (알림, 강의, 커뮤니티, 구매, 쿠폰, 포인트, 환불)
};
```

**주요 변경사항**:
- ✅ 11개 일반 로그인 관련 메서드 제거
- ✅ SNS 로그인, 로그아웃, 마이페이지 API 유지
- ✅ 코드 가독성 개선 (주석 추가)

---

### 8.4 참고 자료

#### 공식 문서
- **Next.js 공식 문서**: https://nextjs.org/docs
- **React Hook Form**: https://react-hook-form.com/
- **SWR**: https://swr.vercel.app/
- **Google OAuth 2.0**: https://developers.google.com/identity/protocols/oauth2
- **Naver 로그인 API**: https://developers.naver.com/docs/login/api/

#### 프로젝트 문서
- **프로젝트 README**: `/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/README.md`
- **Claude CLI 가이드**: `/Users/robb/Documents/GitHub/millmus-global/millmus-global-frontend/CLAUDE.md`

#### 내부 리소스
- **백엔드 API 문서**: 별도 확인 필요
- **디자인 시스템**: Figma 또는 별도 문서 확인
- **배포 가이드**: 별도 확인 필요

#### 관련 이슈 및 PR
- 이메일 로그인 제거 관련 GitHub Issue (생성 필요)
- 계정 마이그레이션 가이드 PR (별도 작업)

---

## 문서 버전 관리

**버전**: 1.0
**최초 작성일**: 2025년 11월 3일
**최종 수정일**: 2025년 11월 3일
**작성자**: Claude (Technical Writer)
**검토자**: (검토 후 추가)

**변경 이력**:
- v1.0 (2025-11-03): 초안 작성 완료

---

## 문서 승인

| 역할 | 이름 | 승인일 | 서명 |
|------|------|--------|------|
| 개발자 | | | |
| QA 엔지니어 | | | |
| 프로젝트 매니저 | | | |
| CTO/Tech Lead | | | |

---

**이 문서는 MillmusGlobal Frontend 프로젝트의 이메일 로그인 제거 작업을 위한 공식 설계서입니다.**
